<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" >
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
    <script src="https://unpkg.com/vue@2.7.8/dist/vue.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <title>Coursework</title>
    
</head>
<body>
    <div id="app"  style="background-color: brown">
        <div style="background-color: red; padding: 20px; text-align: center; color: white;">
            <h1>App header</h1>
            <button class="btn btn-light" v-on:click="showCheckout" :disabled="itemInCart === ''">
                {{itemInCart}}
                <span class="fa fa-shopping-cart"></span>Shopping Cart
            </button>
        </div>
        
        <div class="d-flex" v-if="showLesson">
            <div >
                <i class="fa fa-sort "style="font-size: 30px;" aria-hidden="true"@click="toggleSidebar"></i>
                <div v-show="showSidebar" style="background-color: aquamarine; transition: 0.5s ease;">
                    <h1>SORT</h1>
                    <ul style="list-style: none;">
                        <li>
                            <input type="checkbox" id="subject" v-model="selectedSort" value="subject" @change="handleSort('subject')"/>Subject
                            <div v-if="selectedSort.includes('subject')">
                                <label><input type="radio" v-model="order" value="ascending"> Ascending</label>
                                <label><input type="radio" v-model="order" value="descending"> Descending</label>
                            </div>
                        </li>
                        <li>
                            <input type="checkbox" id="location" v-model="selectedSort" value="location" @change="handleSort('location')"/>Location
                            <div v-if="selectedSort.includes('location')">
                                <label><input type="radio" v-model="order" value="ascending"> Ascending</label>
                                <label><input type="radio" v-model="order" value="descending"> Descending</label>
                            </div>
                        </li>
                        <li>
                            <input type="checkbox" id="price" v-model="selectedSort" value="price" @change="handleSort('price')"/>Price
                            <div v-if="selectedSort.includes('price')">
                                <label><input type="radio" v-model="order" value="ascending"> Ascending</label>
                                <label><input type="radio" v-model="order" value="descending"> Descending</label>
                            </div>
                        </li>
                        <li>
                            <input type="checkbox" id="spaces" v-model="selectedSort" value="spaces" @change="handleSort('spaces')"/>Spaces
                            <div v-if="selectedSort.includes('spaces')">
                                <label><input type="radio" v-model="order" value="ascending"> Ascending</label>
                                <label><input type="radio" v-model="order" value="descending"> Descending</label>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
            
            <div class="container my-4"  style="background-color: blue">
                <div class="row   row-cols-md-4">
                    <div class="col" v-for="lesson in sortedLessons" style="background-color: pink" >
                        <div class="lesson" 
                    style="background-color: green; color: white; border-radius: 10px; padding: 20px; margin: 10px;">
                            <figure>
                                <img v-bind:src="lesson.image" width="200" height="200" alt="Lesson Image">
                            </figure>
                            <h2 v-text="lesson.subject"></h2>
                            <p>Location: {{lesson.location}}</p>
                            <p>Price: {{lesson.price}}</p>
                            <p>Spaces: {{lesson.space}}</p>
                            <button v-on:click="addToCart(lesson)" :disabled="lesson.space === 0"  class="btn btn-danger">Add to Cart</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div v-else>
            <div>
                <h1>Shopping Cart</h1>
                <div v-if="cartLessons.length > 0" class="container my-4"  style="background-color: blue">
                    <div class="row   row-cols-md-4">
                        <div class="col" v-for="lesson in cartLessons" style="background-color: pink" >
                            <div class="lesson" 
                        style="background-color: green; color: white; border-radius: 10px; padding: 20px; margin: 10px;">
                                <figure>
                                    <img v-bind:src="lesson.image" width="200" height="200" alt="Lesson Image">
                                </figure>
                                <h2 v-text="lesson.subject"></h2>
                                <p>Location: {{lesson.location}}</p>
                                <p>Price: {{lesson.price}}</p>
                                <p>Quantity: {{cartQuantity(lesson.id)}}</p>
                                <button v-on:click="removeFromCart(lesson)" class="btn btn-danger">Remove</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div v-else>
                    <p>Shopping Cart is Empty</p>
                </div>
            </div>
            <div>
                <h1>Checkout</h1>
                <div class="d-flex">
                    <input placeholder="Name" v-model="name" @input="validateName"/>
                    <input placeholder="Phone" v-model="phone" @input="validatePhone"/>
                </div>
                <div v-if="nameError" style="color:red;">Name must contain only letters!</div>
                <div v-if="phoneError" style="color:red;">Phone must contain only numbers!</div>
                <button v-bind:disabled="!isFormValid" v-on:click="confirmOrder" >Checkout</button>
            </div>

            <div v-if="modalShow" class="modal fade show" tabindex="-1" role="dialog" style="display: block;" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered">
                  <div class="modal-content">
                    <div>
                        <button type="button" @click="dismiss" class="btn-close float-end fs-3" aria-label="Close"></button>
                    </div>
                    <div class="d-flex flex-column align-items-center justify-content-center text-center py-4">
                        <span class="fa-regular fa-circle-check fa-3x text-success" aria-hidden="true"></span>
                        <p>Order has been Submitted</p>
                    </div>
                  </div>
                </div>
            </div>
        </div>    
    </div>
    <script src="lessons.js"></script>
    <script src="app.js"></script>
       
</body>
</html>